import {attempt} from "fluture";

import {toModule} from "./codegen.serif";
import * as grammar from "./grammar.js";
import rewrite from "./rewrite.serif";

export {
  parse,
  trans,
};

parse filename sourceText = {
  attempt $ () => apply [sourceText, {grammarSource: filename}] grammar.parse
};

trans = {
  toModule . rewrite
};
